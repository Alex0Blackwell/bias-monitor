(()=>{async function e(e,t){let s,a,n,c=!1;a=(new Date).getTime();try{c=async function(e){let t=!1;const s=new URL(e.url);base_url=s.hostname.replace("www.","");let a=await fetch("news_words.csv");a=await a.text();const n=a.split("\n"),c=n.length,o=base_url.toLowerCase();let i=0;for(;i<c&&!t;)o.includes(n[i++])&&(t=!0);if(!t){const e=await fetch("news_sites.csv"),s=await e.text();t=new Set(s.split("\n")).has(base_url)}}(t)}catch(e){console.debug("There was an error parsing the tab url",e),c=!0}c?(console.debug(t.url,"is a news website."),s=["./scrape.js"]):(console.debug(void 0,"is not a news website."),s=["./not_news_event.js"]);try{await chrome.scripting.executeScript({target:{tabId:e},files:s})}catch(e){console.debug(e)}n=(new Date).getTime();const o=(n-a)/1e3;console.debug("Done analyzing, took ",o,"seconds.")}chrome.tabs.onActivated.addListener((async t=>{chrome.tabs.query({active:!0,lastFocusedWindow:!0},(async function(s){const a=t.tabId,n=s[0];await e(a,n)}))})),chrome.tabs.onUpdated.addListener((async(t,s,a)=>{"complete"==s.status&&await e(t,a)}))})();