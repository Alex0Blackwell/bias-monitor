chrome.tabs.onActivated.addListener((async t=>{chrome.tabs.query({active:!0,lastFocusedWindow:!0},(async function(e){const s=t.tabId,c=e[0];let n=!1;const a=await fetch("newsites.txt"),i=(await a.text()).split("\n"),o=i.length;let r=0;for(;!n&&r<o;)c.url.includes(i[r++].trim())&&(n=!0);try{n?(console.log("is news"),await chrome.scripting.executeScript({target:{tabId:s},files:["./scrape.js"]})):(console.log("is not news"),await chrome.scripting.executeScript({target:{tabId:s},files:["./not_news_event.js"]}))}catch(t){console.log(t)}}))}));