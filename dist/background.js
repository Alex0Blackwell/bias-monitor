chrome.tabs.onActivated.addListener((async e=>{chrome.tabs.query({active:!0,lastFocusedWindow:!0},(async function(t){const s=e.tabId,a=new URL(t[0].url).hostname.replace("www.","");let n,c=!1;const o=await fetch("news_sites.csv"),i=await o.text();c=new Set(i.split("\n")).has(a),c?(console.debug(a,"is a news website"),n=["./scrape.js"]):(console.debug(a,"is not a news website"),n=["./not_news_event.js"]);try{await chrome.scripting.executeScript({target:{tabId:s},files:n})}catch(e){console.log(e)}}))}));