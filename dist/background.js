(()=>{const t=["google.com"];chrome.tabs.onUpdated.addListener((async(e,c,i)=>{if("complete"===c.status)try{let c=!1;const a=await fetch("newsites.txt"),s=(await a.text()).split("\n");for(const e of s)if(!(e.length<3)&&i.url.includes(e.trim())&&t.indexOf(e.trim())<0){console.log(i.url,e),c=!0;break}c&&await chrome.scripting.executeScript({target:{tabId:e},files:["./scrape.js"]})}catch(t){console.log(t)}})),chrome.action.onClicked.addListener((async t=>{await chrome.scripting.executeScript({target:{tabId:t.id},files:["./scrape.js"]})}))})();